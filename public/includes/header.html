<header role="banner">
    <nav class="navbar navbar-expand-md navbar-dark bg-light">
      <div class="container">
        <a class="navbar-brand" href="index" ><img src="/images/LOGO.png" alt="" style="height: 50px;"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample05" aria-controls="navbarsExample05" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
  
        <div class="collapse navbar-collapse navbar-light" id="navbarsExample05">
          <ul class="navbar-nav ml-auto pl-lg-5 pl-0">
            <li class="nav-item">
              <a class="nav-link" href="index">Home</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Rooms</a>
              <div class="dropdown-menu" aria-labelledby="dropdown04" id="roomDropdown">
                  <a class="dropdown-item" href="rooms">All Rooms</a>
                  <!-- Dropdown items will be populated here -->
              </div>
            </li>
            <li class="nav-item ">
              <a class="nav-link" href="about">About</a>
            </li>
            <li class="nav-item ">
              <a class="nav-link" href="contact">Contact</a>
            </li>
            <li class="nav-item ">
              <a class="nav-link" href="forms">Feedback / Assistance Form</a>
            </li>
  
            <li class="nav-item cta ">
              <a class="nav-link" href="rooms"><span>Book Now</span></a>
            </li>
          </ul>
          
        </div>
      </div>
    </nav>
  </header>

  <script>
document.addEventListener('DOMContentLoaded', () => {
  const roomDropdownToggle = document.getElementById('dropdown04'); // The dropdown toggle element
  const roomDropdown = document.getElementById('roomDropdown'); // The dropdown menu

  // Add click event listener to the dropdown toggle
  roomDropdownToggle.onclick = function () {
      // Clear existing dropdown items to avoid duplicates
      roomDropdown.innerHTML = '<a class="dropdown-item" href="rooms">All Rooms</a>'; // Reset to default item

      // Fetch room data from the backend
      fetch('/api/available_rooms')
          .then((response) => {
              if (!response.ok) {
                  throw new Error('Failed to fetch room data');
              }
              return response.json();
          })
          .then((rooms) => {
              rooms.forEach((room) => {
                  const roomLink = document.createElement('a');
                  roomLink.classList.add('dropdown-item');
                  roomLink.href = `rooms?ID=${room.room_id}`; // Use query parameter for room ID
                  roomLink.textContent = room.name; // Assuming 'name' is a column in 'room_details'

                  roomDropdown.appendChild(roomLink);
              });
          })
          .catch((error) => {
              console.error('Error fetching room data:', error);
              const errorItem = document.createElement('p');
              errorItem.classList.add('dropdown-item', 'text-danger');
              errorItem.textContent = 'Unable to load rooms';
              roomDropdown.appendChild(errorItem);
          });
  };
});
  </script>